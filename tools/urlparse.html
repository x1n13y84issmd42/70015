<div class="tool unfocused" id="urlparse" data-tag="urlparse">
	<div class="preview"><h1>URL Parser</h1></div>
	<div class="controls smaller">
		<label for="urlparse-url">URL</label>
		<input type="text" name="urlparse-url" id="urlparse-url" spellcheck="false" autofocus>

		<div class="fields">
		</div>
	</div>

	<script>
		class TURLParser extends Tool {
			constructor(id) {
				super(id);
				this.URL = document.getElementById("urlparse-url");

				this.URL.onchange = this.URL.oninput = () => {
					let fields = this.$(".fields")[0];
					while (fields.firstChild)
						fields.removeChild(fields.firstChild);

					let url = new URL(this.URL.value);
					
					if (url.protocol) {
						fields.appendChild(this.Component("urlprop", "Protocol", url.protocol));
					}

					if (url.hostname) {
						fields.appendChild(this.Component("urlprop", "Domain", url.hostname));
					}

					if (url.username) {
						fields.appendChild(this.Component("urlprop", "Username", url.username));
					}

					if (url.password) {
						fields.appendChild(this.Component("urlprop", "Password", url.password));
					}

					if (url.path) {
						fields.appendChild(this.Component("urlprop", "Path", url.path));
					} else if (url.pathname) {
						fields.appendChild(this.Component("urlprop", "Path", url.pathname));
					}

					if (url.port) {
						fields.appendChild(this.Component("urlprop", "Port", url.port));
					}

					if (url.hash) {
						fields.appendChild(this.Component("urlprop", "Hash", url.hash));
					}

					/* if (url.search) {
						fields.appendChild(this.Component("urlprop", "Query string", url.search));
					} */
					
					if (url.search && url.searchParams) {
						fields.appendChild(this.Component("urlprop-section", "Query"));
						for (let e of url.searchParams.entries()) {
							fields.appendChild(this.Component("urlprop-sub", e[0], e[1]));
						}
					}
				};
			}
		}

		tools.add(new TURLParser("urlparse"));
		
	</script>

	<div class="components">
		<div class="urlprop kvpair">
			<span class="label" data-arg="0"></span>
			<span class="value copy" data-arg="1"></span>
		</div>
		
		<div class="urlprop kvpair urlprop-section">
			<span class="label" data-arg="0"></span>
			<span class="value">&nbsp;</span>
		</div>
		
		<div class="urlprop kvpair urlprop-sub">
			<span class="label" data-arg="0"></span>
			<span class="value copy" data-arg="1"></span>
		</div>
	</div>
</div>