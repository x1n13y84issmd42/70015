<tool _id="base64" data-tag="base64" name="Base64" onclose="unfocus" onshare="share">
	<section _id="base64">
		<input type="area" rows="8" label="Base64-encoded string">
		<undercontrols>
			<reuse>
				<hasher input="#base64">Hash it</hasher>
			</reuse>
			<copy from="#base64"></copy>
		</undercontrols>
	</section>

	<div class="bothways">It works ⇃both↾ ways.</div>

	<section _id="ascii">
		<input type="area" rows="8" label="ASCII string">
		<undercontrols>
			<reuse>
				<hasher input="#ascii">Hash it</hasher>
			</reuse>
			<copy from="#ascii"></copy>
		</undercontrols>
	</section>
</tool>

<script>
	(() => {
		class TBase64 extends Tool {
			constructor(id) {
				super(id);

				this.inBase64 = this.Section('base64').Input();
				this.inAscii = this.Section('ascii').Input();

				this.inBase64.oninput = () => this.decode();
				this.inAscii.oninput = () => this.encode();
			}

			decode() {
				this.inAscii.value = atob(this.inBase64.value);
			};
			
			encode() {
				this.inBase64.value = btoa(this.inAscii.value);
			};

			import(data) {
				if (data.ascii) {
					this.inAscii.value = data.ascii;
					this.encode();
				}
				
				if (data.base64) {
					this.base64.value = data.base64;
					this.decode();
				}
			}
		}

		let comp = Component.New('base64');
		window.tools.appendChild(comp);
		bench.add(new TBase64(comp));
	})()
</script>
