		</div>
		<!-- #toolshed, opened in toolshed.html -->

		<script>

			XUI.render(window.menu);

			document.body.onkeydown = (e) => {
				if (e.key == 'Escape') {
					bench.back();
				}
			}

			/**
			 * Temporarily applies a class to an element. The class is removed after the specified amount of time passes.
			 * @param {HTMLElement} e An element to style.
			 * @param {string} className A class name to apply temporarily.
			 * @param {number} time A time period the class should be removed after.
			 */
			function tmpStyle(e, className, time) {
				e.classList.add(className);
				setTimeout(() => {
					e.classList.remove(className);
				}, time);
			}

			function copiedFloater(x, y) {
				let fltr = document.createElement('div');
				fltr.classList.add("floater");
				fltr.style.left = (x - 45) + "px";
				fltr.style.top = (y - 35) + "px";
				fltr.innerHTML = 'Copied.';
				document.body.appendChild(fltr);

				setTimeout(() => {
					fltr.classList.add("vanishing");
				}, 0);

				setTimeout(() => {
					document.body.removeChild(fltr);
				}, 1000);
			}

			document.body.onload = () => {
				//TODO: fixme
				let filter = document.getElementById("filter");
				filter.oninput = () => {
					bench.filter(filter.value);
				}
				
				filter.onkeydown = (e) => {
					if (e.key == 'Enter') {
						//	Focusing the only matched tool.
						let matched = document.querySelectorAll(".matched");
						if (matched.length == 1) {
							focus(matched[0].id);
							e.preventDefault();
							e.cancelBubble = true;
						}
					} else if (e.key == 'Escape') {
						//	Clearing the filtering.
						filter.value = "";
						bench.filter("");
					}
				}

				//	Autofocusing tools upon page load.
				//	The hash can contain a tool data after a '@'.
				if (window.location.hash) {
					let hashSegments = window.location.hash.substr(1).split('@');
					let data;

					if (hashSegments[1]) {
						data = JSON.parse(atob(hashSegments[1]));
					}

					bench.equip(hashSegments[0], data);
				}

				bench.render();
			}
		</script>
	</body>
</html>